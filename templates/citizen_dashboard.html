{% extends 'common/base.html' %}

{% block title %}Citizen Dashboard - Gram Panchayat Portal v2{% endblock %}

{% block content %}
<!-- UPDATED VERSION 2024 -->
<nav class="navbar navbar-expand-lg navbar-dark sub-navbar">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Citizen Portal [UPDATED]</a>
        <div class="ms-auto">
            <a href="/citizen/certificates/apply/" class="btn btn-sm btn-success me-2">Apply Certificate</a>
            <a href="/citizen/rti/submit/" class="btn btn-sm btn-warning me-2">Submit RTI</a>
            <a href="/citizen/land-records/link/" class="btn btn-sm btn-info me-2">Link Land</a>
            <span class="navbar-text me-3">Welcome, Citizen!</span>
            <a href="{% url 'auth:logout' %}" class="btn btn-sm btn-outline-light">Logout</a>
        </div>
    </div>
</nav>

<div class="dashboard-wrapper">
    <div class="sidebar">
        <div class="list-group list-group-flush">
            <a href="#dashboard" class="list-group-item list-group-item-action active" data-bs-toggle="list">
                <i class="bi bi-house-door-fill me-2"></i><span>Dashboard</span>
            </a>
            <a href="#financial" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="bi bi-cash-coin me-2"></i><span>Financial Services</span>
            </a>
            <a href="#grievances" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="bi bi-exclamation-octagon-fill me-2"></i><span>Grievance Redressal</span>
            </a>
            <a href="#schemes" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="bi bi-award-fill me-2"></i><span>Schemes & Subsidies</span>
            </a>
            <a href="#info" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="bi bi-info-circle-fill me-2"></i><span>Information Hub</span>
            </a>
            <a href="#requests" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="bi bi-file-earmark-text-fill me-2"></i><span>Certificates & RTI</span>
            </a>
            <a href="#engagement" class="list-group-item list-group-item-action" data-bs-toggle="list">
                <i class="bi bi-people-fill me-2"></i><span>Citizen Engagement</span>
            </a>
        </div>
    </div>
    <div class="main-content">
        <div class="tab-content">
            <div class="tab-pane fade show active" id="dashboard">
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="summary-card bg-card-blue">
                            <h5>Pending Applications</h5>
                            <div class="summary-number">3</div>
                            <div class="summary-icon"><i class="bi bi-file-earmark-text"></i></div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="summary-card bg-card-green">
                            <h5>Resolved Grievances</h5>
                            <div class="summary-number">12</div>
                            <div class="summary-icon"><i class="bi bi-check-circle"></i></div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="summary-card bg-card-saffron">
                            <h5>Taxes Due</h5>
                            <div class="summary-number">â‚¹2,450</div>
                            <div class="summary-icon"><i class="bi bi-currency-rupee"></i></div>
                        </div>
                    </div>
                </div>
                <div class="content-box mt-4">
                    <h3 class="content-box-title">Common Services</h3>
                    <div class="row">
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="{% url 'pay_tax' %}" class="action-card"><div class="icon-circle bg-card-saffron"><i class="bi bi-cash-coin"></i></div><h6>Pay Property Tax</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="{% url 'lodge_grievance' %}" class="action-card"><div class="icon-circle bg-card-blue"><i class="bi bi-megaphone-fill"></i></div><h6>Lodge Grievance</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="{% url 'view_schemes' %}" class="action-card"><div class="icon-circle bg-card-green"><i class="bi bi-award-fill"></i></div><h6>View Schemes</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="{% url 'emergency_directory' %}" class="action-card"><div class="icon-circle bg-danger"><i class="bi bi-telephone-fill"></i></div><h6>Emergency Directory</h6></a></div>
                    </div>
                </div>
                <div class="content-box mt-4">
                    <h3 class="content-box-title">Recent Activity & Alerts</h3>
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle me-2"></i>Your property tax payment is due by 30th June 2025.
                    </div>
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle me-2"></i>Your grievance #GRV-2025-004 has been assigned to the concerned department.
                    </div>
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle me-2"></i>Your water bill for April has been paid successfully.
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="financial">
                <div class="content-box">
                    <h3 class="content-box-title">Financial Services</h3>
                    <div class="row">
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="{% url 'pay_tax' %}" class="action-card"><div class="icon-circle bg-card-blue"><i class="bi bi-house-check-fill"></i></div><h6>Pay Property Tax</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="#" class="action-card"><div class="icon-circle bg-secondary"><i class="bi bi-droplet-fill"></i></div><h6>Pay Water & Utility Bills</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="{% url 'view_budget' %}" class="action-card"><div class="icon-circle bg-success"><i class="bi bi-pie-chart-fill"></i></div><h6>View Panchayat Budget</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="#" class="action-card"><div class="icon-circle bg-info text-dark"><i class="bi bi-journal-check"></i></div><h6>Social Audit Reports</h6></a></div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="grievances">
                <div class="content-box">
                    <h3 class="content-box-title">Grievance Redressal</h3>
                    <div class="row">
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="{% url 'lodge_grievance' %}" class="action-card"><div class="icon-circle bg-danger"><i class="bi bi-megaphone-fill"></i></div><h6>Lodge New Complaint</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="#" class="action-card"><div class="icon-circle bg-warning text-dark"><i class="bi bi-card-checklist"></i></div><h6>Track My Grievances</h6></a></div>
                    </div>
                    <div class="table-container mt-4">
                        <h4 class="table-title">My Recent Grievances</h4>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Grievance ID</th>
                                    <th>Category</th>
                                    <th>Date Filed</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>GRV-2025-004</td>
                                    <td>Road Maintenance</td>
                                    <td>15 May 2025</td>
                                    <td><span class="badge bg-warning">In Progress</span></td>
                                </tr>
                                <tr>
                                    <td>GRV-2025-002</td>
                                    <td>Water Supply</td>
                                    <td>03 Apr 2025</td>
                                    <td><span class="badge bg-success">Resolved</span></td>
                                </tr>
                                <tr>
                                    <td>GRV-2025-001</td>
                                    <td>Street Light</td>
                                    <td>18 Mar 2025</td>
                                    <td><span class="badge bg-success">Resolved</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="schemes">
                <div class="content-box">
                    <h3 class="content-box-title">Schemes & Subsidies</h3>
                    <div class="row">
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="{% url 'view_schemes' %}" class="action-card"><div class="icon-circle bg-card-green"><i class="bi bi-patch-check-fill"></i></div><h6>View All Schemes</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="#" class="action-card"><div class="icon-circle bg-primary"><i class="bi bi-person-check-fill"></i></div><h6>My Applied Schemes</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="#" class="action-card"><div class="icon-circle bg-info text-dark"><i class="bi bi-people-fill"></i></div><h6>Beneficiary Lists</h6></a></div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="info">
                <div class="content-box">
                    <h3 class="content-box-title">Information Hub</h3>
                    <div class="row">
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="#" class="action-card"><div class="icon-circle bg-light text-dark border"><i class="bi bi-card-checklist"></i></div><h6>Village Notices</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="#" class="action-card"><div class="icon-circle bg-secondary"><i class="bi bi-calendar-event-fill"></i></div><h6>Meeting Schedules</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="#" class="action-card"><div class="icon-circle bg-success"><i class="bi bi-cone-striped"></i></div><h6>Asset & Project Tracker</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="{% url 'emergency_directory' %}" class="action-card"><div class="icon-circle bg-danger"><i class="bi bi-telephone-fill"></i></div><h6>Emergency Directory</h6></a></div>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="requests">
                <div class="content-box">
                    <h3 class="content-box-title">Certificates & RTI</h3>
                    <div class="row">
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="/citizen/certificates/apply/" class="action-card"><div class="icon-circle bg-primary"><i class="bi bi-file-earmark-text-fill"></i></div><h6>Apply Certificate</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="/citizen/rti/submit/" class="action-card"><div class="icon-circle bg-danger"><i class="bi bi-shield-lock-fill"></i></div><h6>Submit RTI Request</h6></a></div>
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="/citizen/land-records/link/" class="action-card"><div class="icon-circle bg-success"><i class="bi bi-map-fill"></i></div><h6>Link Land Records</h6></a></div>
                    </div>
                </div>
            </div>
            
            <div class="tab-pane fade" id="engagement">
                 <div class="content-box">
                    <h3 class="content-box-title">Citizen Engagement</h3>
                    <div class="row">
                        <div class="col-lg-3 col-md-4 col-6 mb-4"><a href="{% url 'feedback_suggestions' %}" class="action-card"><div class="icon-circle bg-info text-dark"><i class="bi bi-lightbulb-fill"></i></div><h6>Feedback & Suggestions</h6></a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Chatbot -->
<div class="chatbot-container">
    <div class="chatbot-toggle">
        <i class="bi bi-chat-dots-fill"></i>
    </div>
    <div class="chatbot-window">
        <div class="chatbot-header">
            <span>Virtual Assistant</span>
            <i class="bi bi-x-lg"></i>
        </div>
        <div class="chatbot-messages">
            <!-- Messages will be added here dynamically -->
        </div>
        <div class="chatbot-input">
            <input type="text" placeholder="Type your message...">
            <button><i class="bi bi-send"></i></button>
        </div>
    </div>
</div>
{% endblock %}
