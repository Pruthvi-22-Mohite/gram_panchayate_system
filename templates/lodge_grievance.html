{% extends 'base.html' %}

{% block title %}Lodge Grievance - Gram Panchayat Portal{% endblock %}

{% block content %}
<nav class="navbar navbar-expand-lg navbar-dark sub-navbar">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Grievance Redressal</a>
        <div class="ms-auto">
            <span class="navbar-text me-3">Welcome, Citizen!</span>
            <a href="{% url 'logout' %}" class="btn btn-sm btn-outline-light">Logout</a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="row">
        <div class="col-lg-3">
            <div class="sidebar">
                <div class="list-group list-group-flush">
                    <a href="{% url 'citizen_dashboard' %}" class="list-group-item list-group-item-action">
                        <i class="bi bi-arrow-left me-2"></i>Back to Dashboard
                    </a>
                    <a href="#" class="list-group-item list-group-item-action active">
                        <i class="bi bi-megaphone-fill me-2"></i>Lodge New Grievance
                    </a>
                    <a href="#" class="list-group-item list-group-item-action">
                        <i class="bi bi-card-checklist me-2"></i>Track My Grievances
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-9">
            <div class="content-box">
                <h3 class="content-box-title">Lodge New Grievance</h3>
                
                <div class="form-container">
                    <form>
                        <div class="mb-3">
                            <label for="grievanceCategory" class="form-label">Grievance Category</label>
                            <select class="form-select" id="grievanceCategory">
                                <option value="">Select Category</option>
                                <option value="road">Road Maintenance</option>
                                <option value="water">Water Supply</option>
                                <option value="electricity">Electricity</option>
                                <option value="sanitation">Sanitation</option>
                                <option value="health">Health Services</option>
                                <option value="education">Education</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="grievanceSubject" class="form-label">Subject</label>
                            <input type="text" class="form-control" id="grievanceSubject" placeholder="Enter subject of your grievance">
                        </div>
                        
                        <div class="mb-3">
                            <label for="grievanceDetails" class="form-label">Details</label>
                            <textarea class="form-control" id="grievanceDetails" rows="5" placeholder="Provide detailed description of your grievance"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="grievanceLocation" class="form-label">Location</label>
                            <input type="text" class="form-control" id="grievanceLocation" placeholder="Enter location of the issue">
                        </div>
                        
                        <div class="mb-3">
                            <label for="grievancePhotos" class="form-label">Upload Photos (Optional)</label>
                            <input class="form-control" type="file" id="grievancePhotos" multiple>
                            <div class="form-text">You can upload up to 5 photos (max 2MB each)</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="grievancePriority" class="form-label">Priority</label>
                            <select class="form-select" id="grievancePriority">
                                <option value="low">Low</option>
                                <option value="medium" selected>Medium</option>
                                <option value="high">High</option>
                                <option value="urgent">Urgent</option>
                            </select>
                        </div>
                        
                        <button type="submit" class="btn btn-primary" onclick="handleFormSubmit(event, 'Grievance')">Submit Grievance</button>
                    </form>
                </div>
                
                <div class="table-container mt-4">
                    <h4 class="table-title">My Recent Grievances</h4>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Grievance ID</th>
                                <th>Subject</th>
                                <th>Category</th>
                                <th>Date Filed</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>GRV-2025-004</td>
                                <td>Street light not working</td>
                                <td>Electricity</td>
                                <td>15 May 2025</td>
                                <td><span class="badge bg-warning">In Progress</span></td>
                                <td><button class="btn btn-sm btn-outline-primary">View Details</button></td>
                            </tr>
                            <tr>
                                <td>GRV-2025-002</td>
                                <td>Water supply issue</td>
                                <td>Water Supply</td>
                                <td>03 Apr 2025</td>
                                <td><span class="badge bg-success">Resolved</span></td>
                                <td><button class="btn btn-sm btn-outline-primary">View Details</button></td>
                            </tr>
                            <tr>
                                <td>GRV-2025-001</td>
                                <td>Potholes on main road</td>
                                <td>Road Maintenance</td>
                                <td>18 Mar 2025</td>
                                <td><span class="badge bg-success">Resolved</span></td>
                                <td><button class="btn btn-sm btn-outline-primary">View Details</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}